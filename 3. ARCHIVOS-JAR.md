# Hacer ficheros JAR

## ¿Qué son los ficheros JAR?

Cuando tenemos un programa grande, con varios paquetes y clases, ya sabemos cómo organizarlo, compilarlo y ejecutarlo. Sin embargo, para pasárselo a otras personas o instalarlo en otro ordenador puede resultar incómodo, ya que debemos copiar directorios completos con múltiples ficheros.

Lo ideal es meter todos estos ficheros y directorios en un único fichero comprimido. Java, mediante el comando `jar` (ubicado en el directorio `bin` de Java), permite empaquetar todo lo que indiquemos (directorios, clases, imágenes u otros recursos) en un único fichero con extensión `.jar`.

Un fichero `.jar` es similar a un `.zip`, `.rar` o `.tar`. De hecho, puede abrirse y descomprimirse con herramientas como WinZip o WinRAR.

Además, Java permite **ejecutar directamente** las clases contenidas en un fichero `.jar` sin necesidad de desempaquetarlo.

En este material veremos:

- Cómo crear un fichero JAR  
- Cómo ver el contenido de un JAR  
- Cómo modificar un JAR  
- Cómo ejecutar un JAR  
- El fichero de manifiesto  

---

## Cómo crear un fichero JAR

Antes de crear un JAR, el programa debe estar correctamente **compilado y funcionando**.

### Clases sin paquetes

Si las clases no pertenecen a paquetes, basta con empaquetar los archivos `.class`.

```bash
cd directorio_con_los_class
jar -cf fichero.jar fichero1.class fichero2.class fichero3.class
```

- `c`: crea un nuevo JAR (sobrescribe si ya existe)
- `f`: indica el nombre del fichero JAR
- Se pueden usar comodines como `*.class`

---

### Clases con paquetes

Si el programa utiliza paquetes, se debe empaquetar la **estructura completa de directorios**.

```bash
cd directorio_padre_de_prueba
jar -cf fichero.jar prueba
```

Esto incluirá el directorio `prueba` y todo su contenido.

También es posible indicar archivos concretos con su ruta relativa:

```bash
cd directorio_padre_de_prueba
jar -cf fichero.jar prueba/HolaMundo.class
```

> En Windows, las barras `/` deben reemplazarse por `\`.

---

## Ver qué hay dentro de un JAR

Para listar el contenido de un fichero JAR:

```bash
jar tf fichero.jar
```

- `t`: muestra el contenido
- `f`: indica el fichero JAR

Conviene verificar que estén todas las clases necesarias y que la estructura coincida con los paquetes.

---

## Modificar un fichero JAR

Para actualizar o añadir archivos dentro de un JAR se utiliza la opción `u`.

```bash
jar uf fichero.jar prueba/HolaMundo.class
```

- Si el archivo existe, se reemplaza
- Si no existe, se añade

---

## Cómo ejecutar un fichero JAR

Para ejecutar una clase dentro de un JAR es necesario incluir el **archivo JAR completo** en el `CLASSPATH`.

```bash
java -cp ./fichero.jar prueba.HolaMundo
```

> Error común: poner el directorio del JAR en lugar del archivo `.jar`.

---

## El fichero de manifiesto

Ejecutar con `-cp` requiere conocer la clase principal y escribir comandos largos. Para evitarlo, Java permite definir una clase principal en un **fichero de manifiesto**.

### Ejemplo de manifiesto

Archivo `manifiesto.txt`:

```
Main-Class: prueba.HolaMundo
```

### Crear un JAR con manifiesto

```bash
jar cmf manifiesto.txt fichero.jar prueba/HolaMundo.class
```

- `m`: indica que se incluye un manifiesto
- El orden de `m` y `f` es importante

---

## Ejecutar un JAR con manifiesto

Una vez creado:

```bash
java -jar fichero.jar
```

Java ejecutará automáticamente la clase indicada en el manifiesto.

En Windows, si los `.jar` están asociados a Java, basta con hacer **doble clic** para ejecutarlos.

---

## Conclusión

El uso de ficheros JAR permite distribuir aplicaciones Java de forma simple y profesional, facilitando su ejecución en distintos entornos con un único archivo.

